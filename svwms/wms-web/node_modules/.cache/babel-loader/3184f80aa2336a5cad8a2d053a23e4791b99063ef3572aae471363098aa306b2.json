{"ast":null,"code":"export default {\n  name: \"Login\",\n  data() {\n    return {\n      confirm_disabled: false,\n      loginForm: {\n        account: '',\n        password: ''\n      },\n      rules: {\n        account: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    confirm() {\n      this.confirm_disabled = true;\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          //valid成功为true，失败为false\n          //去后台验证用户名密码\n          this.$axios.post(this.$httpUrl + '/user/login', this.loginForm).then(res => res.data).then(res => {\n            console.log(res);\n            if (res.code == 200) {\n              //存储\n              sessionStorage.setItem(\"CurUser\", JSON.stringify(res.data.user));\n              console.log(res.data.menu);\n              this.$store.commit(\"setMenu\", res.data.menu);\n              //跳转到主页\n              this.$router.replace('/Index');\n            } else {\n              this.confirm_disabled = false;\n              alert('校验失败，用户名或密码错误！');\n              return false;\n            }\n          });\n        } else {\n          this.confirm_disabled = false;\n          console.log('校验失败');\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","confirm_disabled","loginForm","account","password","rules","required","message","trigger","methods","confirm","$refs","validate","valid","$axios","post","$httpUrl","then","res","console","log","code","sessionStorage","setItem","JSON","stringify","user","menu","$store","commit","$router","replace","alert"],"sources":["src/components/Login.vue"],"sourcesContent":["<template>\n    <div class=\"loginBody\">\n        <div class=\"loginDiv\">\n            <div class=\"login-content\">\n                <h1 class=\"login-title\">用户登录</h1>\n                <el-form :model=\"loginForm\" label-width=\"100px\"\n                         :rules=\"rules\" ref=\"loginForm\">\n                    <el-form-item label=\"账号\" prop=\"account\">\n                        <el-input style=\"width: 200px\" type=\"text\" v-model=\"loginForm.account\"\n                                  autocomplete=\"off\" size=\"small\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"密码\" prop=\"password\">\n                        <el-input style=\"width: 200px\" type=\"password\" v-model=\"loginForm.password\"\n                                  show-password autocomplete=\"off\" size=\"small\" @keyup.enter.native=\"confirm\"></el-input>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"confirm\" :disabled=\"confirm_disabled\">确 定</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\n    export default {\n        name: \"Login\",\n        data(){\n            return{\n                confirm_disabled:false,\n                loginForm:{\n                    account:'',\n                    password:''\n                },\n                rules:{\n                    account: [\n                      { required: true, message: '请输入账号', trigger: 'blur' }\n                    ],\n                    password: [\n                      { required: true, message: '请输密码', trigger: 'blur' }\n                    ],\n                }\n            }\n        },\n        methods:{\n            confirm(){\n                this.confirm_disabled=true;\n                this.$refs.loginForm.validate((valid) => {\n                    if (valid) { //valid成功为true，失败为false\n                        //去后台验证用户名密码\n                        this.$axios.post(this.$httpUrl+'/user/login',this.loginForm).then(res=>res.data).then(res=>{\n                            console.log(res)\n                            if(res.code==200){\n                                //存储\n                                sessionStorage.setItem(\"CurUser\",JSON.stringify(res.data.user))\n\n                                console.log(res.data.menu)\n                                this.$store.commit(\"setMenu\",res.data.menu)\n                                //跳转到主页\n                                this.$router.replace('/Index');\n                            }else{\n                                this.confirm_disabled=false;\n                                alert('校验失败，用户名或密码错误！');\n                                return false;\n                            }\n                        });\n                    } else {\n                        this.confirm_disabled=false;\n                        console.log('校验失败');\n                        return false;\n                    }\n                });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n.loginBody {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: #B3C0D1;\n}\n.loginDiv {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -200px;\n  margin-left: -250px;\n  width: 450px;\n  height: 330px;\n  background: #fff;\n  border-radius: 5%;\n\n}\n.login-title {\n  margin: 20px 0;\n  text-align: center;\n}\n.login-content {\n  width: 400px;\n  height: 250px;\n  position: absolute;\n  top: 25px;\n  left: 25px;\n}\n</style>"],"mappings":"AA0BA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,gBAAA;MACAC,SAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAF,OAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,KAAAT,gBAAA;MACA,KAAAU,KAAA,CAAAT,SAAA,CAAAU,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UAAA;UACA;UACA,KAAAC,MAAA,CAAAC,IAAA,MAAAC,QAAA,uBAAAd,SAAA,EAAAe,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAlB,IAAA,EAAAiB,IAAA,CAAAC,GAAA;YACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;YACA,IAAAA,GAAA,CAAAG,IAAA;cACA;cACAC,cAAA,CAAAC,OAAA,YAAAC,IAAA,CAAAC,SAAA,CAAAP,GAAA,CAAAlB,IAAA,CAAA0B,IAAA;cAEAP,OAAA,CAAAC,GAAA,CAAAF,GAAA,CAAAlB,IAAA,CAAA2B,IAAA;cACA,KAAAC,MAAA,CAAAC,MAAA,YAAAX,GAAA,CAAAlB,IAAA,CAAA2B,IAAA;cACA;cACA,KAAAG,OAAA,CAAAC,OAAA;YACA;cACA,KAAA9B,gBAAA;cACA+B,KAAA;cACA;YACA;UACA;QACA;UACA,KAAA/B,gBAAA;UACAkB,OAAA,CAAAC,GAAA;UACA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}